{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import SearchList from'./SearchList';import APIService from'./APIService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Timer=props=>{const Ref=useRef(null);const[timer,setTimer]=useState('00:00:00');const getTimeRemaining=e=>{const total=Date.parse(e)-Date.parse(new Date());const seconds=Math.floor(total/1000%60);const minutes=Math.floor(total/1000/60%60);const hours=Math.floor(total/1000/60/60%24);return{total,hours,minutes,seconds};};const startTimer=e=>{let{total,hours,minutes,seconds}=getTimeRemaining(e);if(total>=0){setTimer((hours>9?hours:'0'+hours)+':'+(minutes>9?minutes:'0'+minutes)+':'+(seconds>9?seconds:'0'+seconds));}};const clearTimer=e=>{setTimer('00:00:10');if(Ref.current)clearInterval(Ref.current);const id=setInterval(()=>{startTimer(e);},1000);Ref.current=id;};const getDeadTime=()=>{let deadline=new Date();deadline.setSeconds(deadline.getSeconds()+20);return deadline;};useEffect(()=>{clearTimer(getDeadTime());},[]);const onClickReset=()=>{clearTimer(getDeadTime());};function clearmqtt(){APIService.clearmqtt();}return/*#__PURE__*/_jsx(\"div\",{children:timer==='00:00:00'?/*#__PURE__*/_jsx(\"body\",{onLoad:clearmqtt}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading trips at your location....\"}),/*#__PURE__*/_jsx(SearchList,{loctrips:props.loctrips,timer:timer,onClickReset:onClickReset})]})});};export default Timer;","map":{"version":3,"names":["React","useState","useRef","useEffect","SearchList","APIService","jsx","_jsx","jsxs","_jsxs","Timer","props","Ref","timer","setTimer","getTimeRemaining","e","total","Date","parse","seconds","Math","floor","minutes","hours","startTimer","clearTimer","current","clearInterval","id","setInterval","getDeadTime","deadline","setSeconds","getSeconds","onClickReset","clearmqtt","children","onLoad","className","loctrips"],"sources":["C:/Users/18125/Desktop/travel-buddy/travel-app/src/components/Timer.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport SearchList from './SearchList';\r\nimport APIService from './APIService';\r\n\r\nconst Timer = (props) => {\r\n\r\n\tconst Ref = useRef(null);\r\n\r\n\tconst [timer, setTimer] = useState('00:00:00');\r\n\r\n\r\n\tconst getTimeRemaining = (e) => {\r\n\t\tconst total = Date.parse(e) - Date.parse(new Date());\r\n\t\tconst seconds = Math.floor((total / 1000) % 60);\r\n\t\tconst minutes = Math.floor((total / 1000 / 60) % 60);\r\n\t\tconst hours = Math.floor((total / 1000 / 60 / 60) % 24);\r\n\t\treturn {\r\n\t\t\ttotal, hours, minutes, seconds\r\n\t\t};\r\n\t}\r\n\r\n\tconst startTimer = (e) => {\r\n\t\tlet { total, hours, minutes, seconds }\r\n\t\t\t\t\t= getTimeRemaining(e);\r\n\t\tif (total >= 0) {\r\n\t\t\tsetTimer(\r\n\t\t\t\t(hours > 9 ? hours : '0' + hours) + ':' +\r\n\t\t\t\t(minutes > 9 ? minutes : '0' + minutes) + ':'\r\n\t\t\t\t+ (seconds > 9 ? seconds : '0' + seconds)\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst clearTimer = (e) => {\r\n\r\n\t\tsetTimer('00:00:10');\r\n\t\tif (Ref.current) clearInterval(Ref.current);\r\n\t\tconst id = setInterval(() => {\r\n\t\t\tstartTimer(e);\r\n\t\t}, 1000)\r\n\t\tRef.current = id;\r\n\t}\r\n\r\n\tconst getDeadTime = () => {\r\n\t\tlet deadline = new Date();\r\n\t\tdeadline.setSeconds(deadline.getSeconds() + 20);\r\n\t\treturn deadline;\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tclearTimer(getDeadTime());\r\n\t}, []);\r\n\r\n\tconst onClickReset = () => {\r\n\t\tclearTimer(getDeadTime());\r\n\t}\r\n\r\n    function clearmqtt(){\r\n        APIService.clearmqtt()\r\n    }\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n            {timer==='00:00:00'?<body onLoad={clearmqtt}/>:\r\n            <div>\r\n            <div className='loading'>Loading trips at your location....</div>\r\n            <SearchList loctrips={props.loctrips} timer={timer} onClickReset={onClickReset}></SearchList>\r\n            </div>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Timer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}